<%- include("../layouts/user/header.ejs") %>




   <!-- Start Search Flyover -->
   <div class="search-flyoveray"></div>
   <div class="cart-flyout">
       <div class="cart-flyout-inner">
           <a class="btn-close-cart" href="#">
               <i class="fa fa-times"></i>
           </a>
           <div class="cart-flyout__content">
               <div class="cart-flyout__heading">Shopping Cart</div>
               <div class="widget_shopping_cart_content">
                   <ul class="product_list_widget">
                       <li>
                           <div class="thumb">
                               <img src="assets/images/product/sm-product-01.jpg" alt="product">
                           </div>
                           <div class="content">
                               <h6><a href="/single-product">Boys light blue jacket</a></h6>
                               <div class="quntity">1 × $35.99</div>
                               <button class="remove-btn">×</button>
                           </div>
                       </li>

                       <li>
                           <div class="thumb">
                               <img src="assets/images/product/sm-product-02.jpg" alt="product">
                           </div>
                           <div class="content">
                               <h6><a href="/single-product">Boys light blue jacket</a></h6>
                               <div class="quntity">1 × $35.99</div>
                               <button class="remove-btn">×</button>
                           </div>
                       </li>

                       <li>
                           <div class="thumb">
                               <img src="assets/images/product/sm-product-03.jpg" alt="product">
                           </div>
                           <div class="content">
                               <h6><a href="/single-product">Boys light blue jacket</a></h6>
                               <div class="quntity">1 × $35.99</div>
                               <button class="remove-btn">×</button>
                           </div>
                       </li>

                   </ul>
               </div>
               <p class="minicart__total">Subtotal: <span class="price">164.97</span></p>
               <div class="cart__btn">
                   <a href="/cart">View cart</a>
                   <a href="/checkout">Checkout</a>
               </div>
           </div>
       </div>
   </div>

   <!--end search flyover-->

   
   <!-- Start Hamburger -->
   <div class="hamburger-area">
    <div class="btn-close-search">
        <button>
            <i class="fa fa-times" aria-hidden="true"></i>
        </button>
    </div>
    <!-- Start Main Menu -->
    <ul class="menu-primary-menu-1 responsive-manu d-block d-xl-none" id="responsive-manu">
        <li><a href="/">Home</a> </li>
        <li><a href="about.html">About</a></li>
        <li class="has-dropdown"><a href="/shop">Shop</a>
            <ul class="sub-menu">
                <li><a href="/shop"><span>Shop</span></a></li>
                <li><a href="/shop-left-sidebar"><span>Shop Left Sidebar</span></a></li>
                <li><a href="/shop-right-sidebar"><span>Shop No Sidebar</span></a></li>
                <li><a href="/product-details"><span>Product Details</span></a></li>
            </ul>
        </li>
        <li class="has-dropdown"><a href="#">Pages</a>
            <ul class="sub-menu">
                <li><a href="/cart"><span>Cart</span></a></li>
                <li><a href="/checkout"><span>Checkout</span></a></li>
                <li><a href="/wishlist"><span>Wishlist</span></a></li>
                <li><a href="/compare"><span>Compare</span></a></li>
                <li><a href="/profile"><span>profile</span></a></li>
                <li><a href="/login"><span>Login</span></a></li>
                <li><a href="/sign-up"><span>sign Up</span></a></li>
            </ul>
        </li>
        <li class="has-dropdown"><a href="/blog">Blog</a>
            <ul class="sub-menu">
                <li><a href="/blog"><span>Blog</span></a></li>
                <li><a href="/blog-left-sidebar"><span>Blog Left Sidebar</span></a></li>
                <li><a href="/blog-details"><span>Blog Details</span></a></li>
            </ul>
        </li>
        <li><a href="/contact">Contact</a></li>
    </ul>
    <!-- End Main Menu -->
</div>
<!-- End Hamburger -->


    <!-- Start Breadumb Area -->
    <div class="breadcumb-area ptb--100 ptb_md--100 ptb_sm--100  bg_image bg_image--3">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="inner text-center">
                        <h2 class="font--40 mb--0">Login</h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- End Breadumb Area -->
    <div class="main-wrapper flex-column justify-content-center align-items-center">
        <!-- My Account Page -->
        <div class="my-account-area ptb--120 ptb_md--80 ptb_sm--80 bg-color    " data-bg-color="#ffffff">
            <div class="container  ">
                <h2  class="text-danger  ">Login Form</h2>
                <div class="row">
                     <div class="col-lg-6">
                        <div class="login-form-wrapper">
                            <form  class="sn-form sn-form-boxed" >
                                <div class="sn-form-inner">
                                    <div class="single-input">
                                        <label for="login-form-email"> email</label>
                                        <input type="text" name="email" id="login-form-email" required>
                                        <div  id="email-error"  style="display: none; color: red; font-size: 12px ; font-weight: bold;"></div>
                                    </div>
                                    <div class="single-input">
                                        <label for="login-form-password">Password </label>
                                        <input type="password" name="password" id="login-form-password" required>
                                        <div id="password-error"  style="display: none; color: red; font-size: 12px ; font-weight: bold;"></div>
                                    </div>
                                    <br>
                                    <br>
                                   
                                    <div class="single-input">
                                        <button type="submit" id="login-btn" class="mr-3">
                                            <span>Login</span>
                                        </button>
                                        <div class="checkbox-input">
                                            <input type="checkbox" name="login-form-remember" id="login-form-remember">
                                            <label for="login-form-remember">Remember me</label>
                                        </div>
                                    </div>
                                    <div class="single-input">
                                        <a href="#">forgot password?</a>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div> 
                </div>
            </div>    
        </div>
    </div>

    <!-- Quick View Modal -->
    <div class="quick-view-modal">
        <div class="quick-view-modal-inner">
            <div class="container">
                <div class="product-details">
                    <!-- Product Details Left -->
                    <div class="product-details-left">
                        <div class="product-details-images slider-navigation-2">
                            <a href="#">
                                <img class="w-100" src="assets/images/product/product-01.jpg" alt="product image">
                            </a>
                            <a href="#">
                                <img class="w-100" src="assets/images/product/product-02.jpg" alt="product image">
                            </a>
                            <a href="#">
                                <img class="w-100" src="assets/images/product/product-03.jpg" alt="product image">
                            </a>
                            <a href="#">
                                <img class="w-100" src="assets/images/product/product-04.jpg" alt="product image">
                            </a>
                            <a href="#">
                                <img class="w-100" src="assets/images/product/product-05.jpg" alt="product image">
                            </a>
                        </div>
                        <div class="product-details-thumbs slider-navigation-2">
                            <img src="assets/images/product/product-01.jpg" alt="product image thumb">
                            <img src="assets/images/product/product-02.jpg" alt="product image thumb">
                            <img src="assets/images/product/product-03.jpg" alt="product image thumb">
                            <img src="assets/images/product/product-04.jpg" alt="product image thumb">
                            <img src="assets/images/product/product-05.jpg" alt="product image thumb">
                        </div>
                    </div>
                    <!--// Product Details Left -->

                    <!-- Product Details Right -->
                    <div class="product-details-right">
                        <h5 class="product-title">Demo Product Name</h5>

                        <div class="ratting-stock-availbility">
                            <div class="ratting-box">
                                <span><i class="fa fa-star"></i></span>
                                <span><i class="fa fa-star"></i></span>
                                <span><i class="fa fa-star"></i></span>
                                <span><i class="fa fa-star"></i></span>
                                <span><i class="fa fa-star"></i></span>
                            </div>
                            <span class="stock-available">In stock</span>
                        </div>

                        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam fringilla augue nec est
                            tristique auctor. Donec non est at libero vulputate rutrum. Morbi ornare lectus quis
                            justo gravida semper. Nulla tellus mi, vulputate adipiscing cursus eu, suscipit id
                            nulla. adipiscing cursus eu, suscipit id nulla.</p>

                        <div class="price-box">
                            <span class="pricebox-price">£80.00</span>
                        </div>

                        <div class="product-details-quantity">
                            <div class="quantity-select">
                                <div class="pro-quantity">
                                    <div class="pro-qty"><input type="text" value="1"></div>
                                </div>
                            </div>
                            <a href="#" class="add-to-cart-button">
                                <span>ADD TO CART</span>
                            </a>
                        </div>

                        <div class="product-details-color">
                            <span>Color :</span>
                            <ul>
                                <li class="red"><span></span></li>
                                <li class="green checked"><span></span></li>
                                <li class="blue"><span></span></li>
                                <li class="black"><span></span></li>
                            </ul>
                        </div>

                        <div class="product-details-size">
                            <span>Size :</span>
                            <ul>
                                <li class="checked"><span>S</span></li>
                                <li><span>M</span></li>
                                <li><span>L</span></li>
                                <li><span>XL</span></li>
                                <li><span>XXL</span></li>
                            </ul>
                        </div>

                        <div class="product-details-categories">
                            <span>Categories :</span>
                            <ul>
                                <li><a href="shop.html">Accessories</a></li>
                                <li><a href="shop.html">Kids</a></li>
                                <li><a href="shop.html">Women</a></li>
                            </ul>
                        </div>

                        <div class="product-details-tags">
                            <span>Tags :</span>
                            <ul>
                                <li><a href="shop.html">Electronic</a></li>
                                <li><a href="shop.html">Television</a></li>
                            </ul>
                        </div>

                        <div class="product-details-socialshare">
                            <span>Share :</span>
                            <ul>
                                <li><a class="facebook" href="#"><i class="fa fa-facebook"></i></a></li>
                                <li><a class="twitter" href="#"><i class="fa fa-twitter"></i></a></li>
                                <li><a class="google-plus" href="#"><i class="fa fa-google-plus"></i></a></li>
                                <li><a class="linkedin" href="#"><i class="fa fa-linkedin"></i></a></li>
                                <li><a class="instagram" href="#"><i class="fa fa-instagram"></i></a></li>
                            </ul>
                        </div>
                    </div>
                    <!--// Product Details Right -->

                </div>
            </div>
        </div>
        <button class="close-quickview-modal"><i class="fa fa-close"></i></button>
    </div>
  
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

    <script>

        document.getElementById('login-btn').addEventListener('click' , async (e) => {
            e.preventDefault()

            const email = document.getElementById('login-form-email').value
        const password = document.getElementById('login-form-password').value
        const emailPattern = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/

        const emailMessage = document.getElementById('email-error')
        const passwordMessage = document.getElementById('password-error')

        emailMessage.textContent=""
        passwordMessage.textContent=''
            
        if (email== '') {
            emailMessage.style.display= "block"
            return;
          
        } else if (!emailPattern.test(email)) {
            emailMessage.style.display= "block"
            emailMessage.textContent = 'Enter a valid email';
            return
          ;
        } else if (!email.endsWith('@gmail.com')) {
            emailMessage.style.display= "block"
            emailMessage.textContent = 'Email must end with "@gmail.com"';
            return
        }

        if (password == '') {
            passwordMessage.style.display= "block"
            passwordMessage.textContent = 'Password is required';
           
        } else if (password.length < 8) {
            passwordMessage.style.display= "block"
            passwordMessage.textContent = 'Password must be at least 8 characters';
        
        } else if (!/[A-Z]/.test(password)) {
            passwordMessage.style.display= "block"
            passwordMessage.textContent = 'Password must contain at least one uppercase letter';
     
        } else if (!/[a-z]/.test(password)) {
            passwordMessage.style.display= "block"
            passwordMessage.textContent = 'Password must contain at least one lowercase letter';
          
        } else if (!/\d/.test(password)) {
            passwordMessage.style.display= "block"
            passwordMessage.textContent = 'Password must contain at least one number';
         
        }


        toastr.options = {
        "positionClass": "toast-center",
        "timeOut": "3000",
        "extendedTimeOut": "2000", 
        "showMethod": "slideDown",
        "hideMethod": "slideUp"
    };

        
    $.ajax({
    type: 'post',
    url: '/login',
    data: {
        email: email,
        password: password
    },
    success: (response) => {
        if (response.success) {
            toastr.success("Login successfull");
            setTimeout (() => {
            window.location.href = "/home";
            },3000)
        } else {
            if(response.error){
            toastr.error("you are blocked. Please contact for more information");
            setTimeout (() => {
                window.location.href = "/login";
            },3000)
         
        }
    }
    },
});

        })

    </script>

    <%- include("../layouts/user/footer.ejs") %>
